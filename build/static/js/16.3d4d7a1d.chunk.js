(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[16],{110:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(128);n(177);a.a.initializeApp({apiKey:"AIzaSyDM5Cqu1m1YJ7E44OfM9Yo3LH0ZUN8Y6x4",authDomain:"sunmoon-swe.firebaseapp.com",projectId:"sunmoon-swe",storageBucket:"sunmoon-swe.appspot.com",messagingSenderId:"1064857281018",appId:"1:1064857281018:web:b2881ce151e1a16b068443",measurementId:"G-JYK8JT1WEN"});var c=a.a.storage()},116:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return b})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return m}));var a,c,r,o,i,l=n(96),s=n(418),u=Object(s.a)(a||(a=Object(l.a)(["\n  query getBoardById($id: Int!) {\n    getBoardById(id: $id) {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        private\n        type\n        files {\n          id\n          url\n          fileName\n        }\n        images {\n          id\n          url\n          fileName\n        }\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n"]))),d=Object(s.a)(c||(c=Object(l.a)(["\n  query getLinks {\n    getLinks {\n      ok\n      err\n      data {\n        id\n        url\n        title\n        createdAt\n      }\n    }\n  }\n"]))),b=Object(s.a)(r||(r=Object(l.a)(["\n  query getBoard {\n    getBoard {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n"]))),f=Object(s.a)(o||(o=Object(l.a)(["\n  mutation UserLogin($id: String!, $pwd: String!) {\n    UserLogin(id: $id, pwd: $pwd) {\n      success\n      error\n      data {\n        id\n        stno\n      }\n    }\n  }\n"]))),m=Object(s.a)(i||(i=Object(l.a)(["\n  query getBoardByMonth($category: String!) {\n    getBoardByMonth(category: $category) {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n"])))},124:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=function(e){return"storage"===(null===e||void 0===e?void 0:e.toString().split("-")[0])},c=function(e){switch(null===e||void 0===e?void 0:e.toString().split("-")[0]){case"storage":case"achievement":return!0;default:return!1}},r=function(e){switch(null===e||void 0===e?void 0:e.toString().split("-")[1]){case"aidnews":case"valuenews":case"coopnews":return!0;default:return!1}},o=function(e){switch(null===e||void 0===e?void 0:e.toString().split("-")[0]){case"storage":case"achievement":return!0;default:return!1}},i=function(e){return"introduce"!==(null===e||void 0===e?void 0:e.toString().split("-")[0])}},134:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(44),c=n(110),r=function(e,t,n,r){c.a.ref("/".concat(e,"/").concat(t,"/").concat(n)).delete().then((function(){r("")})).catch((function(e){return a.b.error(e)}))}},135:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(111),c=n(107),r=n.n(c),o=n(44),i=n(110),l=function(e,t,n,c,l,s,u,d,b){i.a.ref("/".concat(e,"/").concat(n,"/").concat(c)).put(t).on("state_changed",(function(e){}),(function(e){return console.log(e)}),(function(){u(1),i.a.ref("/".concat(e,"/").concat(n,"/").concat(c)).getDownloadURL().then(function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(t),!d||!b){e.next=4;break}return e.next=4,d({variables:{url:t,fileName:c,boardId:b}});case 4:o.b.success("\ud30c\uc77c / \uc774\ubbf8\uc9c0\uac00 \uc5c5\ub85c\ub4dc \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),u(0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}},221:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s}));var a,c,r=n(96),o=n(102),i=n(174),l=o.a.div(a||(a=Object(r.a)(["\n  & .button-group {\n    display: flex;\n    align-items: center;\n  }\n\n  & .attach-group {\n    display: flex;\n    margin: 5px 0;\n  }\n\n  & .attach-button {\n    margin-left: 15px;\n    background-color: transparent;\n    border: none;\n    cursor: pointer;\n    &:hover {\n      color: #e74c3c;\n      transition: linear 0.2s;\n    }\n  }\n"]))),s=Object(o.a)(i.a)(c||(c=Object(r.a)(["\n  margin: 15px 0;\n  margin-right: 15px;\n"])))},224:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(87),c=n(89),r=n(93),o=n(2),i=n(86),l=n.n(i),s=n(106),u=n(132),d=n(100),b=n(153),f=n(6);function m(e){return void 0!==e&&null!==e}var p=function(e){var t,n=e.itemPrefixCls,c=e.component,r=e.span,i=e.className,s=e.style,u=e.labelStyle,d=e.contentStyle,b=e.bordered,f=e.label,p=e.content,j=e.colon,O=c;return b?o.createElement(O,{className:l()((t={},Object(a.a)(t,"".concat(n,"-item-label"),m(f)),Object(a.a)(t,"".concat(n,"-item-content"),m(p)),t),i),style:s,colSpan:r},m(f)&&o.createElement("span",{style:u},f),m(p)&&o.createElement("span",{style:d},p)):o.createElement(O,{className:l()("".concat(n,"-item"),i),style:s,colSpan:r},o.createElement("div",{className:"".concat(n,"-item-container")},f&&o.createElement("span",{className:l()("".concat(n,"-item-label"),Object(a.a)({},"".concat(n,"-item-no-colon"),!j)),style:u},f),p&&o.createElement("span",{className:l()("".concat(n,"-item-content")),style:d},p)))};function j(e,t,n){var a=t.colon,c=t.prefixCls,r=t.bordered,i=n.component,l=n.type,s=n.showLabel,u=n.showContent,d=n.labelStyle,b=n.contentStyle;return e.map((function(e,t){var n=e.props,m=n.label,j=n.children,O=n.prefixCls,v=void 0===O?c:O,g=n.className,h=n.style,y=n.labelStyle,x=n.contentStyle,k=n.span,w=void 0===k?1:k,B=e.key;return"string"===typeof i?o.createElement(p,{key:"".concat(l,"-").concat(B||t),className:g,style:h,labelStyle:Object(f.a)(Object(f.a)({},d),y),contentStyle:Object(f.a)(Object(f.a)({},b),x),span:w,colon:a,component:i,itemPrefixCls:v,bordered:r,label:s?m:null,content:u?j:null}):[o.createElement(p,{key:"label-".concat(B||t),className:g,style:Object(f.a)(Object(f.a)(Object(f.a)({},d),h),y),span:1,colon:a,component:i[0],itemPrefixCls:v,bordered:r,label:m}),o.createElement(p,{key:"content-".concat(B||t),className:g,style:Object(f.a)(Object(f.a)(Object(f.a)({},b),h),x),span:2*w-1,component:i[1],itemPrefixCls:v,bordered:r,content:j})]}))}var O=function(e){var t=o.useContext(h),n=e.prefixCls,a=e.vertical,c=e.row,r=e.index,i=e.bordered;return a?o.createElement(o.Fragment,null,o.createElement("tr",{key:"label-".concat(r),className:"".concat(n,"-row")},j(c,e,Object(f.a)({component:"th",type:"label",showLabel:!0},t))),o.createElement("tr",{key:"content-".concat(r),className:"".concat(n,"-row")},j(c,e,Object(f.a)({component:"td",type:"content",showContent:!0},t)))):o.createElement("tr",{key:r,className:"".concat(n,"-row")},j(c,e,Object(f.a)({component:i?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},v=function(e){return e.children},g=n(105),h=o.createContext({}),y={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function x(e,t,n){var a=e;return(void 0===t||t>n)&&(a=Object(g.a)(e,{span:n}),Object(d.a)(void 0===t,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),a}function k(e){var t,n=e.prefixCls,i=e.title,d=e.extra,f=e.column,m=void 0===f?y:f,p=e.colon,j=void 0===p||p,v=e.bordered,g=e.layout,k=e.children,w=e.className,B=e.style,S=e.size,C=e.labelStyle,N=e.contentStyle,I=o.useContext(b.b),E=I.getPrefixCls,A=I.direction,L=E("descriptions",n),$=o.useState({}),q=Object(c.a)($,2),F=q[0],D=q[1],P=function(e,t){if("number"===typeof e)return e;if("object"===Object(r.a)(e))for(var n=0;n<u.b.length;n++){var a=u.b[n];if(t[a]&&void 0!==e[a])return e[a]||y[a]}return 3}(m,F);o.useEffect((function(){var e=u.a.subscribe((function(e){"object"===Object(r.a)(m)&&D(e)}));return function(){u.a.unsubscribe(e)}}),[]);var J=function(e,t){var n=Object(s.a)(e).filter((function(e){return e})),a=[],c=[],r=t;return n.forEach((function(e,o){var i,l=null===(i=e.props)||void 0===i?void 0:i.span,s=l||1;if(o===n.length-1)return c.push(x(e,l,r)),void a.push(c);s<r?(r-=s,c.push(e)):(c.push(x(e,s,r)),a.push(c),r=t,c=[])})),a}(k,P),M=o.useMemo((function(){return{labelStyle:C,contentStyle:N}}),[C,N]);return o.createElement(h.Provider,{value:M},o.createElement("div",{className:l()(L,(t={},Object(a.a)(t,"".concat(L,"-").concat(S),S&&"default"!==S),Object(a.a)(t,"".concat(L,"-bordered"),!!v),Object(a.a)(t,"".concat(L,"-rtl"),"rtl"===A),t),w),style:B},(i||d)&&o.createElement("div",{className:"".concat(L,"-header")},i&&o.createElement("div",{className:"".concat(L,"-title")},i),d&&o.createElement("div",{className:"".concat(L,"-extra")},d)),o.createElement("div",{className:"".concat(L,"-view")},o.createElement("table",null,o.createElement("tbody",null,J.map((function(e,t){return o.createElement(O,{key:t,index:t,colon:j,prefixCls:L,vertical:"vertical"===g,bordered:v,row:e})})))))))}k.Item=v;t.b=k},428:function(e,t,n){"use strict";n.r(t);var a,c=n(92),r=n(111),o=n(89),i=n(107),l=n.n(i),s=n(224),u=n(397),d=n(413),b=n(417),f=n(2),m=n(142),p=n.n(m),j=n(4),O=n(96),v=n(102).a.div(a||(a=Object(O.a)(["\n  & .attach-group {\n    display: flex;\n    margin: 5px 0;\n  }\n\n  & .attach-button {\n    margin-left: 15px;\n    background-color: transparent;\n    border: none;\n    cursor: pointer;\n    &:hover {\n      color: #e74c3c;\n      transition: linear 0.2s;\n    }\n  }\n  & .button-group {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  img {\n    object-fit: contain;\n    width: 300px;\n    height: 400px;\n  }\n"]))),g=n(197),h=n(405),y=n(116),x=n(126),k=n(221),w=n(130),B=n(404),S=n(429),C=n(110),N=n(108),I=n(44),E=n(135),A=n(134),L=n(124),$=n(11);t.default=function(){var e=Object(j.g)(),t=Object(j.i)(),n=t.param,a=t.subparam,i=Object(j.h)().search,m=p.a.parse(i),O=m.category,q=m.id,F=Object(f.useState)(),D=Object(o.a)(F,2),P=D[0],J=D[1],M=Object(f.useState)(),U=Object(o.a)(M,2),z=U[0],R=U[1],Y=Object(f.useState)([]),T=Object(o.a)(Y,2),_=T[0],K=T[1],G=Object(f.useState)(),H=Object(o.a)(G,2),W=H[0],Z=H[1],Q=Object(f.useState)(),V=Object(o.a)(Q,2),X=V[0],ee=V[1],te=Object(f.useState)(),ne=Object(o.a)(te,2),ae=ne[0],ce=ne[1],re=Object(x.a)(""),oe=Object(o.a)(re,3),ie=oe[0],le=oe[1],se=oe[2],ue=Object(f.useState)(0),de=Object(o.a)(ue,2),be=de[0],fe=de[1],me=Object(f.useState)(!1),pe=Object(o.a)(me,2),je=pe[0],Oe=pe[1],ve=Object(f.useState)(!1),ge=Object(o.a)(ve,2),he=ge[0],ye=ge[1];Object(f.useEffect)((function(){Oe(Object(L.b)(a)),ye(Object(L.d)(a))}),[a]);var xe=Object(g.a)(y.b,{variables:{id:parseInt(q,10)}}),ke=xe.loading,we=xe.data,Be=xe.refetch,Se=Object(h.a)(N.c,{onCompleted:function(e){e.createImage.ok&&(fe(0),Be&&Be())}}),Ce=Object(o.a)(Se,1)[0],Ne=Object(h.a)(N.f,{onCompleted:function(e){var t=e.deleteImage,n=t.ok,a=t.err;n?(Be&&Be(),I.b.error("\uc774\ubbf8\uc9c0\uac00 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4")):(console.log(a),I.b.error(a))}}),Ie=Object(o.a)(Ne,1)[0],Ee=Object(h.a)(N.b,{onCompleted:function(e){e.createFile.ok&&(fe(0),Be&&Be())}}),Ae=Object(o.a)(Ee,1)[0],Le=Object(h.a)(N.e,{onCompleted:function(e){var t=e.deleteFile,n=t.ok,a=t.err;n?(I.b.success("\ud30c\uc77c\uc774 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),Be&&Be()):(console.log(a),I.b.error(a))}}),$e=Object(o.a)(Le,1)[0],qe=Object(h.a)(N.h,{onCompleted:function(t){var a=t.editBoard,c=a.ok,r=a.err;c?(I.b.success("\uac8c\uc2dc\ubb3c\uc774 \uc218\uc815 \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),e.push({pathname:"/admin/".concat(n,"/").concat(O),state:{refresh:!0}})):(console.log(r),I.b.error("\uac8c\uc2dc\ubb3c\uc744 \uc0ad\uc81c \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"))}}),Fe=Object(o.a)(qe,1)[0],De=Object(f.useCallback)((function(){X&&X.trim()&&Object(A.a)("images",O,X,Z)}),[O,X]),Pe=Object(f.useCallback)(function(){var e=Object(r.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:De(),fe(be+1),n=t.name,ee(t.name),Object(E.a)("images",t,O,n,Z,be,fe,Ce,parseInt(q,10));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[O,be,De,Ce,q]),Je=Object(f.useCallback)((function(e){fe(1),C.a.ref("/files/".concat(O,"/").concat(e.name)).put(e).on("state_changed",(function(e){}),(function(e){return console.log(e)}),(function(){C.a.ref("/files/".concat(O,"/").concat(e.name)).getDownloadURL().then(function(){var t=Object(r.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return K((function(t){return[].concat(Object(c.a)(t),[{url:n,fileName:e.name}])})),t.next=3,Ae({variables:{url:n,fileName:e.name,boardId:parseInt(q,10)},onCompleted:function(e){var t=e.createFile,n=t.ok,a=t.err;n?(I.b.success("\ud30c\uc77c\uc774 \uc5c5\ub85c\ub4dc \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),Be&&Be()):(I.b.error("\ud30c\uc77c \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4"),console.log(a))}});case 3:fe(be-1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}),[Ae,q,O,be,Be]),Me=Object(f.useCallback)(function(){var e=Object(r.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.a.ref("/files/".concat(O,"/").concat(n)).delete(),e.next=3,$e({variables:{id:t}});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[$e,O]);return Object(f.useEffect)((function(){var e;(we&&we.getBoardById&&we.getBoardById.data&&(J(we.getBoardById.data),se(we.getBoardById.data.link||"")),we&&we.getBoardById&&we.getBoardById.data&&we.getBoardById.data.files&&R(we.getBoardById.data.files),we&&we.getBoardById&&we.getBoardById.data&&we.getBoardById.data.images)&&(ce(we.getBoardById.data.images[0]),ee(null===(e=we.getBoardById.data.images[0])||void 0===e?void 0:e.fileName))}),[we,J,se]),ke?Object($.jsx)("div",{children:"loading..."}):Object($.jsxs)(v,{children:[Object($.jsxs)("div",{className:"button-group",children:[Object($.jsx)(k.a,{type:"ghost",onClick:function(){return e.goBack()},children:"\ub4a4\ub85c"}),Object($.jsx)(k.a,{type:"primary",disabled:0!==be,onClick:function(){return Fe({variables:{id:parseInt(q,10),link:ie.includes("http")?ie:"http://".concat(ie)}})},children:0===be?"\uc644\ub8cc":Object($.jsxs)($.Fragment,{children:[Object($.jsx)(w.a,{})," \ud30c\uc77c / \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub529 \uc911"]})})]}),Object($.jsxs)(s.b,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},layout:"horizontal",children:[he&&Object($.jsx)(s.b.Item,{label:"\ub9c1\ud06c",span:4,labelStyle:{width:100},children:Object($.jsx)(u.a,{placeholder:(null===P||void 0===P?void 0:P.link)||void 0,value:ie,onChange:le})}),je&&Object($.jsxs)(s.b.Item,{label:"\ud30c\uc77c",span:4,labelStyle:{width:100},children:[z&&0!==z.length?Object($.jsx)($.Fragment,{children:z.map((function(e,t){return Object($.jsxs)("div",{className:"attach-group",children:[Object($.jsx)("a",{href:null===e||void 0===e?void 0:e.url,download:!0,target:"_blank",rel:"noreferrer",children:null===e||void 0===e?void 0:e.fileName}),Object($.jsx)("button",{className:"attach-button",onClick:function(){return Me(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.fileName)},children:Object($.jsx)(B.a,{})})]},t)}))}):0===_.length?Object($.jsx)("div",{children:"\ucca8\ubd80\ud30c\uc77c \uc5c6\uc74c"}):Object($.jsx)($.Fragment,{}),Object($.jsx)(d.a,{multiple:!0,maxCount:4,className:"upload-list-inline",customRequest:function(e){var t=e.file;return Je(t)},onChange:function(e){var t=e.file;0!==_.length?t.status="done":t.status="removed"},children:Object($.jsx)(k.a,{icon:Object($.jsx)(S.a,{}),children:"\ud30c\uc77c \uc5c5\ub85c\ub4dc"})})]}),Object($.jsxs)(s.b.Item,{label:"\uc774\ubbf8\uc9c0",span:4,labelStyle:{width:100},children:[ae&&Object($.jsx)(k.a,{danger:!0,icon:Object($.jsx)(B.a,{}),onClick:function(){Object(A.a)("images",O,ae.fileName,Z),Ie({variables:{id:ae.id}})},children:"\uc774\ubbf8\uc9c0 \uc0ad\uc81c"}),Object($.jsx)(d.a,{listType:"picture",customRequest:function(e){var t=e.file;ae&&Ie({variables:{id:ae&&ae.id}}),Pe(t)},progress:{showInfo:!0},onChange:function(e){var t=e.file;t.status=W?"done":"removed"},maxCount:1,children:Object($.jsx)(k.a,{icon:Object($.jsx)(S.a,{}),children:"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc"})}),ae?Object($.jsx)("img",{src:ae.url,alt:ae.fileName}):Object($.jsx)(b.a.Text,{children:"\uc5c5\ub85c\ub4dc \ub41c \uc774\ubbf8\uc9c0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"})]})]})]})}}}]);
//# sourceMappingURL=16.3d4d7a1d.chunk.js.map