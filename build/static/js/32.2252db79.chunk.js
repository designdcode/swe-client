(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[32],{327:function(e,t,a){"use strict";var c=a(6),n=a(88),l=a(2),r=a(89),i=a(96),o=a(87),s=a.n(o),d=a(122),b=a(123),u=l.forwardRef((function(e,t){var a,c=e.prefixCls,o=void 0===c?"rc-switch":c,u=e.className,j=e.checked,h=e.defaultChecked,O=e.disabled,f=e.loadingIcon,p=e.checkedChildren,m=e.unCheckedChildren,v=e.onClick,g=e.onChange,x=e.onKeyDown,y=Object(i.a)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),C=Object(d.a)(!1,{value:j,defaultValue:h}),k=Object(r.a)(C,2),w=k[0],B=k[1];function I(e,t){var a=w;return O||(B(a=e),null===g||void 0===g||g(a,t)),a}var S=s()(o,u,(a={},Object(n.a)(a,"".concat(o,"-checked"),w),Object(n.a)(a,"".concat(o,"-disabled"),O),a));return l.createElement("button",Object.assign({},y,{type:"button",role:"switch","aria-checked":w,disabled:O,className:S,ref:t,onKeyDown:function(e){e.which===b.a.LEFT?I(!1,e):e.which===b.a.RIGHT&&I(!0,e),null===x||void 0===x||x(e)},onClick:function(e){var t=I(!w,e);null===v||void 0===v||v(t,e)}}),f,l.createElement("span",{className:"".concat(o,"-inner")},w?p:m))}));u.displayName="Switch";var j=u,h=a(138),O=a(193),f=a(169),p=a(116),m=a(99),v=function(e,t){var a={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.indexOf(c)<0&&(a[c]=e[c]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(c=Object.getOwnPropertySymbols(e);n<c.length;n++)t.indexOf(c[n])<0&&Object.prototype.propertyIsEnumerable.call(e,c[n])&&(a[c[n]]=e[c[n]])}return a},g=l.forwardRef((function(e,t){var a,r=e.prefixCls,i=e.size,o=e.loading,d=e.className,b=void 0===d?"":d,u=e.disabled,g=v(e,["prefixCls","size","loading","className","disabled"]);Object(m.a)("checked"in g||!("value"in g),"Switch","`value` is not a valid prop, do you mean `checked`?");var x=l.useContext(f.b),y=x.getPrefixCls,C=x.direction,k=l.useContext(p.b),w=y("switch",r),B=l.createElement("div",{className:"".concat(w,"-handle")},o&&l.createElement(h.a,{className:"".concat(w,"-loading-icon")})),I=s()((a={},Object(n.a)(a,"".concat(w,"-small"),"small"===(i||k)),Object(n.a)(a,"".concat(w,"-loading"),o),Object(n.a)(a,"".concat(w,"-rtl"),"rtl"===C),a),b);return l.createElement(O.a,{insertExtraNode:!0},l.createElement(j,Object(c.a)({},g,{prefixCls:w,className:I,disabled:u||o,ref:t,loadingIcon:B})))}));g.__ANT_SWITCH=!0,g.displayName="Switch";t.a=g},537:function(e,t,a){"use strict";a.r(t);var c,n=a(94),l=a(92),r=a(115),i=a(89),o=a(113),s=a.n(o),d=a(2),b=a(4),u=a(166),j=a.n(u),h=a(139),O=a(180),f=a(121),p=a(104),m=a(45),v=a(320),g=a(245),x=a(494),y=a(541),C=a(327),k=a(126),w=a(500),B=a(561),I=a(138),S=a(114),N=a(156),E=a(157),R=a(132),A=a(196),D=a.n(A),F=(a(198),a(103)),T=a(11),_={toolbar:[[{header:[1,2,!1]}],["bold","italic"],[{list:"ordered"},{list:"bullet"}],["clean"]]},P=["header","bold","italic","underline","list"];t.default=function(){var e,t,a=Object(b.h)().search,c=j.a.parse(a),n=Object(b.g)(),o=Object(b.i)(),u=o.param,A=o.subparam,D=c.id,F=c.category,q=Object(d.useState)(),z=Object(i.a)(q,2),K=z[0],H=z[1],J=Object(d.useState)(),L=Object(i.a)(J,2),M=L[0],U=L[1],G=Object(d.useState)([]),V=Object(i.a)(G,2),W=V[0],Q=V[1],X=Object(d.useState)(),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(k.a)(""),ae=Object(i.a)(te,3),ce=ae[0],ne=ae[1],le=ae[2],re=Object(k.a)(""),ie=Object(i.a)(re,2),oe=ie[0],se=ie[1],de=Object(d.useState)(""),be=Object(i.a)(de,2),ue=be[0],je=be[1],he=Object(k.a)(""),Oe=Object(i.a)(he,3),fe=Oe[0],pe=Oe[1],me=Oe[2],ve=Object(d.useState)(0),ge=Object(i.a)(ve,2),xe=ge[0],ye=ge[1],Ce=Object(d.useState)(),ke=Object(i.a)(Ce,2),we=ke[0],Be=ke[1],Ie=Object(d.useState)(),Se=Object(i.a)(Ie,2),Ne=Se[0],Ee=Se[1],Re=Object(d.useState)(),Ae=Object(i.a)(Re,2),De=Ae[0],Fe=Ae[1],Te=Object(d.useState)(),_e=Object(i.a)(Te,2),Pe=_e[0],Ye=_e[1],qe=Object(d.useState)(!1),ze=Object(i.a)(qe,2),Ke=ze[0],He=ze[1],Je=Object(d.useState)(!1),Le=Object(i.a)(Je,2),Me=Le[0],Ue=Le[1],Ge=Object(h.a)(f.b,{variables:{id:parseInt(D,10)}}),Ve=Ge.data,We=Ge.loading,Qe=Ge.refetch;Object(d.useEffect)((function(){He(Object(R.d)(A))}),[A]);var Xe=Object(O.a)(p.e,{onCompleted:function(e){var t=e.deleteBoard,a=t.ok,c=t.err;a?(m.b.success("\uac8c\uc2dc\ubb3c\uc774 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),n.push({pathname:"/admin/".concat(u,"/").concat(F),state:{refresh:!0}})):(console.log(c),m.b.error("\uac8c\uc2dc\ubb3c\uc744 \uc0ad\uc81c \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"))}}),Ze=Object(i.a)(Xe,1)[0],$e=Object(O.a)(p.f,{onCompleted:function(e){var t=e.deleteFile,a=t.ok,c=t.err;a&&(m.b.success("\ud30c\uc77c\uc774 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),Qe?Qe():(console.log(c),m.b.error(c)))}}),et=Object(i.a)($e,1)[0],tt=Object(O.a)(p.b),at=Object(i.a)(tt,1)[0],ct=Object(O.a)(p.c),nt=Object(i.a)(ct,1)[0],lt=Object(O.a)(p.i,{onCompleted:function(e){var t=e.editBoard,a=t.ok,c=t.err;a?(m.b.success("\uac8c\uc2dc\ubb3c\uc774 \uc218\uc815 \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),n.push({pathname:"/admin/".concat(u,"/").concat(F),state:{refresh:!0}})):(console.log(c),m.b.error("\uac8c\uc2dc\ubb3c\uc744 \uc0ad\uc81c \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"))}}),rt=Object(i.a)(lt,1)[0],it=Object(d.useCallback)((function(){Ze({variables:{id:parseInt(D,10)}})}),[D,Ze]),ot=Object(d.useCallback)(Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt({variables:{id:parseInt(D,10),title:ce,content:ue,link:fe,private:De,showAttach:Pe,inputCreatedAt:oe}});case 2:case"end":return e.stop()}}),e)}))),[D,ce,ue,fe,rt,De,Pe,oe]),st=Object(d.useCallback)(function(){var e=Object(r.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.a.ref("/files/".concat(F,"/").concat(a)).delete(),e.next=3,et({variables:{id:t}});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[et,F]),dt=Object(d.useCallback)((function(e){ye(xe+1),Ee(e.name),Ue(!0),Object(E.a)("images",e,F,e.name,Be,xe,ye,nt,parseInt(D,10)),Ue(!1),ye(0)}),[F,xe,nt,D]),bt=Object(d.useCallback)((function(e){Ue(!0),ye(xe+1),S.a.ref("/files/".concat(F,"/").concat(e.name)).put(e).on("state_changed",(function(e){}),(function(e){return console.log(e)}),(function(){S.a.ref("/files/".concat(F,"/").concat(e.name)).getDownloadURL().then(function(){var t=Object(r.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Q((function(t){return[].concat(Object(l.a)(t),[{url:a,fileName:e.name}])})),t.next=3,at({variables:{url:a,fileName:e.name,boardId:parseInt(D,10)},onCompleted:function(e){var t=e.createFile,a=t.ok,c=t.err;a?(m.b.success("\ud30c\uc77c\uc774 \uc5c5\ub85c\ub4dc \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),Qe&&Qe()):(m.b.error("\ud30c\uc77c \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4"),console.log(c))}});case 3:Ue(!1),ye(xe-1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}),[at,D,F,xe,Qe]),ut=Object(d.useCallback)((function(){Ne&&Ne.trim()&&Object(N.a)("images",F,Ne,Be)}),[F,Ne]);return Object(d.useEffect)((function(){Ve&&Ve.getBoardById&&Ve.getBoardById.data&&(Fe(!!Ve.getBoardById.data.private),Ye(!!Ve.getBoardById.data.showAttach),H(Ve.getBoardById.data),le(Ve.getBoardById.data.title||""),je(Ve.getBoardById.data.content||""),me(Ve.getBoardById.data.link||"")),Ve&&Ve.getBoardById&&Ve.getBoardById.data&&Ve.getBoardById.data.files&&U(Ve.getBoardById.data.files),Ve&&Ve.getBoardById&&Ve.getBoardById.data&&Ve.getBoardById.data.images&&ee(Ve.getBoardById.data.images)}),[Ve,le,je,me]),Object(d.useEffect)((function(){xe<0&&ye(0)}),[xe]),We||!K?Object(T.jsx)("div",{children:"loading..."}):Object(T.jsxs)(v.b,{children:[Object(T.jsx)(v.a,{type:"ghost",onClick:function(){return n.goBack()},children:"\ub4a4\ub85c"}),Object(T.jsxs)(g.b,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},layout:"horizontal",children:[Object(T.jsx)(g.b.Item,{label:"\uc81c\ubaa9",span:4,labelStyle:{width:100},children:Object(T.jsx)(x.a,{placeholder:(null===K||void 0===K?void 0:K.title)||void 0,value:ce,onChange:ne})}),Object(T.jsx)(g.b.Item,{label:"\uc0dd\uc131\ub0a0\uc9dc",span:4,labelStyle:{width:100},children:Object(T.jsx)(x.a,{placeholder:(null===K||void 0===K?void 0:K.inputCreatedAt)||"YYYY-MM-DD",value:oe,onChange:se,style:{width:200}})}),Object(T.jsxs)(g.b.Item,{label:"\ud30c\uc77c",span:4,labelStyle:{width:100},children:[M&&0!==M.length?Object(T.jsx)(T.Fragment,{children:M.map((function(e,t){return Object(T.jsxs)("div",{className:"attach-group",children:[Object(T.jsx)("a",{href:null===e||void 0===e?void 0:e.url,download:!0,target:"_blank",rel:"noreferrer",children:null===e||void 0===e?void 0:e.fileName}),Object(T.jsx)("button",{className:"attach-button",onClick:function(){return st(e.id,e.fileName)},children:Object(T.jsx)(w.a,{})})]},t)}))}):0===W.length?Object(T.jsx)("div",{children:"\ucca8\ubd80\ud30c\uc77c \uc5c6\uc74c"}):Object(T.jsx)(T.Fragment,{}),Object(T.jsx)(y.a,{multiple:!0,maxCount:4,className:"upload-list-inline",customRequest:function(e){var t=e.file;return bt(t)},onChange:function(e){var t=e.file;0!==W.length?t.status="done":t.status="removed"},children:Object(T.jsx)(v.a,{icon:Object(T.jsx)(B.a,{}),children:"\ud30c\uc77c \uc5c5\ub85c\ub4dc"})})]}),Object(T.jsx)(g.b.Item,{label:"\ud30c\uc77c\uacf5\uac1c",span:4,labelStyle:{width:120},children:Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{children:Pe?Object(T.jsx)("span",{style:{color:"#0081fa"},children:"\uacf5\uac1c"}):Object(T.jsx)("span",{style:{color:"#ff4447"},children:"\ube44\uacf5\uac1c"})}),Object(T.jsx)("div",{children:Object(T.jsx)(C.a,{defaultChecked:!(null===Ve||void 0===Ve||null===(e=Ve.getBoardById.data)||void 0===e||!e.showAttach),onChange:function(){return Ye(!Pe)}})})]})}),"achievement"===u&&Object(T.jsx)(g.b.Item,{label:"\uacf5\uac1c",span:4,children:Object(T.jsx)(C.a,{defaultChecked:null===Ve||void 0===Ve||null===(t=Ve.getBoardById.data)||void 0===t||!t.private,onChange:function(){return Fe(!De)}})}),Ke&&Object(T.jsx)(g.b.Item,{label:"\ub9c1\ud06c",span:4,children:Object(T.jsx)(x.a,{placeholder:(null===K||void 0===K?void 0:K.link)||void 0,value:fe,onChange:pe})}),"achievement"===u&&Object(T.jsxs)(g.b.Item,{label:"\uc774\ubbf8\uc9c0",span:4,labelStyle:{width:100},children:[$&&0!==$.length?Object(T.jsx)("div",{children:we?Object(T.jsx)("img",{src:we,width:300,alt:"upimage"}):Object(T.jsx)("img",{src:$[0].url,alt:"ima",width:300})}):Object(T.jsx)("div",{children:"\uc774\ubbf8\uc9c0 \uc5c6\uc74c"}),Object(T.jsx)(y.a,{multiple:!0,maxCount:1,listType:"picture",className:"upload-list-inline",progress:{showInfo:!0},onRemove:function(){return ut()},customRequest:function(e){var t=e.file;return dt(t)},onChange:function(e){var t=e.file;0!==W.length?t.status="done":t.status="removed"},children:Object(T.jsx)(v.a,{icon:Object(T.jsx)(B.a,{}),children:"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc"})})]}),Object(T.jsx)(g.b.Item,{label:"\ub0b4\uc6a9",span:4,children:Object(T.jsx)(Y,{modules:_,formats:P,value:ue||"",onChange:function(e){je(e)},theme:"snow"})})]}),Object(T.jsxs)("div",{className:"button-group",children:[Object(T.jsx)(v.a,{type:"primary",onClick:function(){return ot()},disabled:Me,children:We?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(I.a,{}),"Uploading..."]}):"\uc5c5\ub85c\ub4dc"}),Object(T.jsx)(v.a,{type:"primary",danger:!0,onClick:it,children:"\uc0ad\uc81c\ud558\uae30"})]})]})};var Y=Object(F.a)(D.a)(c||(c=Object(n.a)(["\n  background-color: white;\n  min-height: 300px;\n  .ql-container {\n    min-height: 300px;\n  }\n"])))}}]);
//# sourceMappingURL=32.2252db79.chunk.js.map