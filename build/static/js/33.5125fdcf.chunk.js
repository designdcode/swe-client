(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[33],{299:function(e,t,a){"use strict";var c=a(6),n=a(88),r=a(2),l=a(87),o=a(94),i=a(86),s=a.n(i),d=a(121),b=a(117),u=r.forwardRef((function(e,t){var a,c=e.prefixCls,i=void 0===c?"rc-switch":c,u=e.className,j=e.checked,O=e.defaultChecked,h=e.disabled,f=e.loadingIcon,p=e.checkedChildren,m=e.unCheckedChildren,g=e.onClick,v=e.onChange,x=e.onKeyDown,y=Object(o.a)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),C=Object(d.a)(!1,{value:j,defaultValue:O}),k=Object(l.a)(C,2),B=k[0],I=k[1];function w(e,t){var a=B;return h||(I(a=e),null===v||void 0===v||v(a,t)),a}var N=s()(i,u,(a={},Object(n.a)(a,"".concat(i,"-checked"),B),Object(n.a)(a,"".concat(i,"-disabled"),h),a));return r.createElement("button",Object.assign({},y,{type:"button",role:"switch","aria-checked":B,disabled:h,className:N,ref:t,onKeyDown:function(e){e.which===b.a.LEFT?w(!1,e):e.which===b.a.RIGHT&&w(!0,e),null===x||void 0===x||x(e)},onClick:function(e){var t=w(!B,e);null===g||void 0===g||g(t,e)}}),f,r.createElement("span",{className:"".concat(i,"-inner")},B?p:m))}));u.displayName="Switch";var j=u,O=a(132),h=a(180),f=a(162),p=a(114),m=a(100),g=function(e,t){var a={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.indexOf(c)<0&&(a[c]=e[c]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(c=Object.getOwnPropertySymbols(e);n<c.length;n++)t.indexOf(c[n])<0&&Object.prototype.propertyIsEnumerable.call(e,c[n])&&(a[c[n]]=e[c[n]])}return a},v=r.forwardRef((function(e,t){var a,l=e.prefixCls,o=e.size,i=e.loading,d=e.className,b=void 0===d?"":d,u=e.disabled,v=g(e,["prefixCls","size","loading","className","disabled"]);Object(m.a)("checked"in v||!("value"in v),"Switch","`value` is not a valid prop, do you mean `checked`?");var x=r.useContext(f.b),y=x.getPrefixCls,C=x.direction,k=r.useContext(p.b),B=y("switch",l),I=r.createElement("div",{className:"".concat(B,"-handle")},i&&r.createElement(O.a,{className:"".concat(B,"-loading-icon")})),w=s()((a={},Object(n.a)(a,"".concat(B,"-small"),"small"===(o||k)),Object(n.a)(a,"".concat(B,"-loading"),i),Object(n.a)(a,"".concat(B,"-rtl"),"rtl"===C),a),b);return r.createElement(h.a,{insertExtraNode:!0},r.createElement(j,Object(c.a)({},v,{prefixCls:B,className:w,disabled:u||i,ref:t,loadingIcon:I})))}));v.__ANT_SWITCH=!0,v.displayName="Switch";t.a=v},469:function(e,t,a){"use strict";a.r(t);var c=a(92),n=a(111),r=a(87),l=a(109),o=a.n(l),i=a(2),s=a(4),d=a(159),b=a.n(d),u=a(134),j=a(157),O=a(120),h=a(102),f=a(44),p=a(293),m=a(227),g=a(456),v=a(473),x=a(299),y=a(125),C=a(463),k=a(490),B=a(132),I=a(112),w=a(150),N=a(151),S=a(137),E=a(11);t.default=function(){var e,t=Object(s.h)().search,a=b.a.parse(t),l=Object(s.g)(),d=Object(s.i)(),R=d.param,F=d.subparam,T=a.id,_=a.category,D=Object(i.useState)(),P=Object(r.a)(D,2),z=P[0],K=P[1],q=Object(i.useState)(),A=Object(r.a)(q,2),H=A[0],J=A[1],L=Object(i.useState)([]),U=Object(r.a)(L,2),G=U[0],V=U[1],W=Object(i.useState)(),M=Object(r.a)(W,2),Q=M[0],X=M[1],Y=Object(y.a)(""),Z=Object(r.a)(Y,3),$=Z[0],ee=Z[1],te=Z[2],ae=Object(y.a)(""),ce=Object(r.a)(ae,3),ne=ce[0],re=ce[1],le=ce[2],oe=Object(y.a)(""),ie=Object(r.a)(oe,3),se=ie[0],de=ie[1],be=ie[2],ue=Object(i.useState)(0),je=Object(r.a)(ue,2),Oe=je[0],he=je[1],fe=Object(i.useState)(),pe=Object(r.a)(fe,2),me=pe[0],ge=pe[1],ve=Object(i.useState)(),xe=Object(r.a)(ve,2),ye=xe[0],Ce=xe[1],ke=Object(i.useState)(),Be=Object(r.a)(ke,2),Ie=Be[0],we=Be[1],Ne=Object(i.useState)(!1),Se=Object(r.a)(Ne,2),Ee=Se[0],Re=Se[1],Fe=Object(i.useState)(!1),Te=Object(r.a)(Fe,2),_e=Te[0],De=Te[1],Pe=Object(u.a)(O.b,{variables:{id:parseInt(T,10)}}),ze=Pe.data,Ke=Pe.loading,qe=Pe.refetch;Object(i.useEffect)((function(){Re(Object(S.d)(F))}),[F]);var Ae=Object(j.a)(h.e,{onCompleted:function(e){var t=e.deleteBoard,a=t.ok,c=t.err;a?(f.b.success("\uac8c\uc2dc\ubb3c\uc774 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),l.push({pathname:"/admin/".concat(R,"/").concat(_),state:{refresh:!0}})):(console.log(c),f.b.error("\uac8c\uc2dc\ubb3c\uc744 \uc0ad\uc81c \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"))}}),He=Object(r.a)(Ae,1)[0],Je=Object(j.a)(h.f,{onCompleted:function(e){var t=e.deleteFile,a=t.ok,c=t.err;a&&(f.b.success("\ud30c\uc77c\uc774 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),qe?qe():(console.log(c),f.b.error(c)))}}),Le=Object(r.a)(Je,1)[0],Ue=Object(j.a)(h.b),Ge=Object(r.a)(Ue,1)[0],Ve=Object(j.a)(h.c),We=Object(r.a)(Ve,1)[0],Me=Object(j.a)(h.j,{onCompleted:function(e){var t=e.editBoard,a=t.ok,c=t.err;a?(f.b.success("\uac8c\uc2dc\ubb3c\uc774 \uc218\uc815 \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),l.push({pathname:"/admin/".concat(R,"/").concat(_),state:{refresh:!0}})):(console.log(c),f.b.error("\uac8c\uc2dc\ubb3c\uc744 \uc0ad\uc81c \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"))}}),Qe=Object(r.a)(Me,1)[0],Xe=Object(i.useCallback)((function(){He({variables:{id:parseInt(T,10)}})}),[T,He]),Ye=Object(i.useCallback)(Object(n.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe({variables:{id:parseInt(T,10),title:$,content:ne,link:se,private:Ie}});case 2:case"end":return e.stop()}}),e)}))),[T,$,ne,se,Qe,Ie]),Ze=Object(i.useCallback)(function(){var e=Object(n.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.a.ref("/files/".concat(_,"/").concat(a)).delete(),e.next=3,Le({variables:{id:t}});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[Le,_]),$e=Object(i.useCallback)((function(e){he(Oe+1),Ce(e.name),De(!0),Object(N.a)("images",e,_,e.name,ge,Oe,he,We,parseInt(T,10)),De(!1),he(0)}),[_,Oe,We,T]),et=Object(i.useCallback)((function(e){De(!0),he(Oe+1),I.a.ref("/files/".concat(_,"/").concat(e.name)).put(e).on("state_changed",(function(e){}),(function(e){return console.log(e)}),(function(){I.a.ref("/files/".concat(_,"/").concat(e.name)).getDownloadURL().then(function(){var t=Object(n.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return V((function(t){return[].concat(Object(c.a)(t),[{url:a,fileName:e.name}])})),t.next=3,Ge({variables:{url:a,fileName:e.name,boardId:parseInt(T,10)},onCompleted:function(e){var t=e.createFile,a=t.ok,c=t.err;a?(f.b.success("\ud30c\uc77c\uc774 \uc5c5\ub85c\ub4dc \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),qe&&qe()):(f.b.error("\ud30c\uc77c \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4"),console.log(c))}});case 3:De(!1),he(Oe-1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}),[Ge,T,_,Oe,qe]),tt=Object(i.useCallback)((function(){ye&&ye.trim()&&Object(w.a)("images",_,ye,ge)}),[_,ye]);return Object(i.useEffect)((function(){ze&&ze.getBoardById&&ze.getBoardById.data&&(we(!!ze.getBoardById.data.private),K(ze.getBoardById.data),te(ze.getBoardById.data.title||""),le(ze.getBoardById.data.content||""),be(ze.getBoardById.data.link||"")),ze&&ze.getBoardById&&ze.getBoardById.data&&ze.getBoardById.data.files&&J(ze.getBoardById.data.files),ze&&ze.getBoardById&&ze.getBoardById.data&&ze.getBoardById.data.images&&X(ze.getBoardById.data.images)}),[ze,te,le,be]),Object(i.useEffect)((function(){Oe<0&&he(0)}),[Oe]),Ke||!z?Object(E.jsx)("div",{children:"loading..."}):Object(E.jsxs)(p.b,{children:[Object(E.jsx)(p.a,{type:"ghost",onClick:function(){return l.goBack()},children:"\ub4a4\ub85c"}),Object(E.jsxs)(m.b,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},layout:"horizontal",children:[Object(E.jsx)(m.b.Item,{label:"\uc81c\ubaa9",span:4,labelStyle:{width:100},children:Object(E.jsx)(g.a,{placeholder:(null===z||void 0===z?void 0:z.title)||void 0,value:$,onChange:ee})}),Object(E.jsxs)(m.b.Item,{label:"\ud30c\uc77c",span:4,labelStyle:{width:100},children:[H&&0!==H.length?Object(E.jsx)(E.Fragment,{children:H.map((function(e,t){return Object(E.jsxs)("div",{className:"attach-group",children:[Object(E.jsx)("a",{href:null===e||void 0===e?void 0:e.url,download:!0,target:"_blank",rel:"noreferrer",children:null===e||void 0===e?void 0:e.fileName}),Object(E.jsx)("button",{className:"attach-button",onClick:function(){return Ze(e.id,e.fileName)},children:Object(E.jsx)(C.a,{})})]},t)}))}):0===G.length?Object(E.jsx)("div",{children:"\ucca8\ubd80\ud30c\uc77c \uc5c6\uc74c"}):Object(E.jsx)(E.Fragment,{}),Object(E.jsx)(v.a,{multiple:!0,maxCount:4,className:"upload-list-inline",customRequest:function(e){var t=e.file;return et(t)},onChange:function(e){var t=e.file;0!==G.length?t.status="done":t.status="removed"},children:Object(E.jsx)(p.a,{icon:Object(E.jsx)(k.a,{}),children:"\ud30c\uc77c \uc5c5\ub85c\ub4dc"})})]}),"achievement"===R&&Object(E.jsx)(m.b.Item,{label:"\uacf5\uac1c",span:4,children:Object(E.jsx)(x.a,{defaultChecked:null===ze||void 0===ze||null===(e=ze.getBoardById.data)||void 0===e||!e.private,onChange:function(){return we(!Ie)}})}),Ee&&Object(E.jsx)(m.b.Item,{label:"\ub9c1\ud06c",span:4,children:Object(E.jsx)(g.a,{placeholder:(null===z||void 0===z?void 0:z.link)||void 0,value:se,onChange:de})}),"achievement"===R&&Object(E.jsxs)(m.b.Item,{label:"\uc774\ubbf8\uc9c0",span:4,labelStyle:{width:100},children:[Q&&0!==Q.length?Object(E.jsx)("div",{children:me?Object(E.jsx)("img",{src:me,width:300,alt:"upimage"}):Object(E.jsx)("img",{src:Q[0].url,alt:"ima",width:300})}):Object(E.jsx)("div",{children:"\uc774\ubbf8\uc9c0 \uc5c6\uc74c"}),Object(E.jsx)(v.a,{multiple:!0,maxCount:1,listType:"picture",className:"upload-list-inline",progress:{showInfo:!0},onRemove:function(){return tt()},customRequest:function(e){var t=e.file;return $e(t)},onChange:function(e){var t=e.file;0!==G.length?t.status="done":t.status="removed"},children:Object(E.jsx)(p.a,{icon:Object(E.jsx)(k.a,{}),children:"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc"})})]}),Object(E.jsx)(m.b.Item,{label:"\ub0b4\uc6a9",span:4,children:Object(E.jsx)(g.a.TextArea,{placeholder:z.content||"",rows:10,value:ne,onChange:re})})]}),Object(E.jsxs)("div",{className:"button-group",children:[Object(E.jsx)(p.a,{type:"primary",onClick:function(){return Ye()},disabled:_e,children:Ke?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(B.a,{}),"Uploading..."]}):"\uc5c5\ub85c\ub4dc"}),Object(E.jsx)(p.a,{type:"primary",danger:!0,onClick:Xe,children:"\uc0ad\uc81c\ud558\uae30"})]})]})}}}]);
//# sourceMappingURL=33.5125fdcf.chunk.js.map