(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[26],{102:function(e,n,t){"use strict";t.d(n,"a",(function(){return $})),t.d(n,"j",(function(){return h})),t.d(n,"d",(function(){return v})),t.d(n,"h",(function(){return k})),t.d(n,"e",(function(){return S})),t.d(n,"f",(function(){return y})),t.d(n,"b",(function(){return I})),t.d(n,"c",(function(){return x})),t.d(n,"g",(function(){return w})),t.d(n,"i",(function(){return N}));var a,r,c,i,o,u,l,s,d,b,f,j,m,O,g=t(93),p=t(473),$=Object(p.a)(a||(a=Object(g.a)(["\n  mutation createBoard(\n    $title: String\n    $content: String\n    $category: String!\n    $files: [AttachModel]\n    $images: [AttachModel]\n    $link: String\n    $type: String\n    $private: Boolean\n  ) {\n    createBoard(\n      title: $title\n      content: $content\n      category: $category\n      files: $files\n      images: $images\n      link: $link\n      type: $type\n      private: $private\n    ) {\n      ok\n      err\n    }\n  }\n"]))),h=Object(p.a)(r||(r=Object(g.a)(["\n  query getBoardByCategory($category: String!) {\n    getBoardByCategory(category: $category) {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        private\n        type\n        files {\n          id\n          url\n          fileName\n        }\n        images {\n          id\n          url\n          fileName\n        }\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n"]))),v=Object(p.a)(c||(c=Object(g.a)(["\n  mutation deleteBoard($id: Int!) {\n    deleteBoard(id: $id) {\n      ok\n      err\n    }\n  }\n"]))),k=Object(p.a)(i||(i=Object(g.a)(["\n  mutation editBoard(\n    $id: Int!\n    $title: String\n    $content: String\n    $link: String\n    $private: Boolean\n    $type: String\n  ) {\n    editBoard(\n      id: $id\n      title: $title\n      content: $content\n      link: $link\n      private: $private\n      type: $type\n    ) {\n      ok\n      err\n    }\n  }\n"]))),S=(Object(p.a)(o||(o=Object(g.a)(["\n  mutation editFile($id: Int!, $url: String!, $fileName: String!) {\n    editFile(id: $id, url: $url, fileName: $fileName) {\n      ok\n      err\n    }\n  }\n"]))),Object(p.a)(u||(u=Object(g.a)(["\n  mutation editImage($id: Int!, $url: String!, $fileName: String!) {\n    editImage(id: $id, url: $url, fileName: $fileName) {\n      ok\n      err\n    }\n  }\n"]))),Object(p.a)(l||(l=Object(g.a)(["\n  mutation deleteFile($id: Int!) {\n    deleteFile(id: $id) {\n      ok\n      err\n    }\n  }\n"])))),y=Object(p.a)(s||(s=Object(g.a)(["\n  mutation deleteImage($id: Int!) {\n    deleteImage(id: $id) {\n      ok\n      err\n    }\n  }\n"]))),I=Object(p.a)(d||(d=Object(g.a)(["\n  mutation createFile($url: String!, $fileName: String!, $boardId: Int!) {\n    createFile(url: $url, fileName: $fileName, boardId: $boardId) {\n      ok\n      err\n    }\n  }\n"]))),x=Object(p.a)(b||(b=Object(g.a)(["\n  mutation createImage($url: String!, $fileName: String!, $boardId: Int!) {\n    createImage(url: $url, fileName: $fileName, boardId: $boardId) {\n      ok\n      err\n    }\n  }\n"]))),w=(Object(p.a)(f||(f=Object(g.a)(["\n  mutation createLink($title: String!, $url: String!) {\n    createLink(title: $title, url: $url) {\n      ok\n      err\n    }\n  }\n"]))),Object(p.a)(j||(j=Object(g.a)(["\n  mutation deleteLink($id: Int!) {\n    deleteLink(id: $id) {\n      ok\n      err\n    }\n  }\n"])))),N=(Object(p.a)(m||(m=Object(g.a)(["\n  mutation editLink($id: Int!, $title: String, $url: String) {\n    editLink(id: $id, title: $title, url: $url) {\n      ok\n      err\n    }\n  }\n"]))),Object(p.a)(O||(O=Object(g.a)(["\n  mutation editPopup($up: String!, $url: String) {\n    editPopup(up: $up, url: $url) {\n      ok\n      err\n    }\n  }\n"]))))},111:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t(128);t(179);a.a.initializeApp({apiKey:"AIzaSyDM5Cqu1m1YJ7E44OfM9Yo3LH0ZUN8Y6x4",authDomain:"sunmoon-swe.firebaseapp.com",projectId:"sunmoon-swe",storageBucket:"sunmoon-swe.appspot.com",messagingSenderId:"1064857281018",appId:"1:1064857281018:web:b2881ce151e1a16b068443",measurementId:"G-JYK8JT1WEN"});var r=a.a.storage()},132:function(e,n,t){"use strict";t.d(n,"d",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"e",(function(){return c})),t.d(n,"b",(function(){return i})),t.d(n,"a",(function(){return o}));var a=function(e){return"storage"===(null===e||void 0===e?void 0:e.toString().split("-")[0])},r=function(e){switch(null===e||void 0===e?void 0:e.toString().split("-")[0]){case"storage":case"achievement":return!0;default:return!1}},c=function(e){switch(null===e||void 0===e?void 0:e.toString().split("-")[1]){case"aidnews":case"valuenews":case"coopnews":return!0;default:return!1}},i=function(e){switch(null===e||void 0===e?void 0:e.toString().split("-")[0]){case"storage":case"achievement":return!0;default:return!1}},o=function(e){return"introduce"!==(null===e||void 0===e?void 0:e.toString().split("-")[0])}},157:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var a=t(44),r=t(111),c=function(e,n,t,c){r.a.ref("/".concat(e,"/").concat(n,"/").concat(t)).delete().then((function(){c("")})).catch((function(e){return a.b.error(e)}))}},158:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var a=t(113),r=t(110),c=t.n(r),i=t(44),o=t(111),u=function(e,n,t,r,u,l,s,d,b){o.a.ref("/".concat(e,"/").concat(t,"/").concat(r)).put(n).on("state_changed",(function(e){}),(function(e){return console.log(e)}),(function(){s(1),o.a.ref("/".concat(e,"/").concat(t,"/").concat(r)).getDownloadURL().then(function(){var e=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(n),!d||!b){e.next=4;break}return e.next=4,d({variables:{url:n,fileName:r,boardId:b}});case 4:i.b.success("\ud30c\uc77c / \uc774\ubbf8\uc9c0\uac00 \uc5c5\ub85c\ub4dc \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),s(0);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}))}},465:function(e,n,t){"use strict";t.r(n);var a,r=t(93),c=t(89),i=t(92),o=t(113),u=t(88),l=t(110),s=t.n(l),d=t(2),b=t(138),f=t.n(b),j=t(4),m=t(132),O=t(173),g=t(102),p=t(135),$=t(44),h=t(471),v=t(203),k=t(453),S=t(468),y=t(201),I=t(485),x=t(133),w=t(158),N=t(111),C=t(157),B=t(101),F=t(11),L={wrapperCol:{span:16}};n.default=function(){var e=Object(j.g)(),n=Object(j.h)().search,t=f.a.parse(n),a=t.category,r=t.param,l=t.subparam,b=Object(p.a)(""),B=Object(u.a)(b,3),R=B[0],U=B[1],J=B[2],q=Object(d.useState)(!1),D=Object(u.a)(q,2),M=D[0],Y=D[1],E=Object(d.useState)([]),T=Object(u.a)(E,2),z=T[0],K=T[1],P=Object(d.useState)(),_=Object(u.a)(P,2),G=_[0],H=_[1],W=Object(d.useState)(),Z=Object(u.a)(W,2),Q=Z[0],V=Z[1],X=Object(d.useState)(!1),ee=Object(u.a)(X,2),ne=ee[0],te=ee[1],ae=Object(d.useState)(!1),re=Object(u.a)(ae,2),ce=re[0],ie=re[1],oe=Object(d.useState)(0),ue=Object(u.a)(oe,2),le=ue[0],se=ue[1],de=Object(d.useState)(!1),be=Object(u.a)(de,2),fe=(be[0],be[1]),je=Object(d.useState)(!1),me=Object(u.a)(je,2),Oe=me[0],ge=me[1];Object(d.useEffect)((function(){te(Object(m.d)(l)),ie(Object(m.b)(l))}),[l]);var pe=Object(O.a)(g.a,{onCompleted:function(n){var t=n.createBoard,a=t.ok,c=t.err;a?(J(""),$.b.success("\uac8c\uc2dc\ubb3c\uc744 \uc0dd\uc131 \ud558\uc600\uc2b5\ub2c8\ub2e4"),e.push({pathname:"/admin/".concat(r,"/").concat(l),state:{refresh:!0}})):(console.log(c),$.b.error("\uac8c\uc2dc\ubb3c\uc744 \uc0dd\uc131 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"))}}),$e=Object(u.a)(pe,1)[0],he=Object(d.useCallback)((function(){Y(!M),M||J("")}),[M,J,Y]),ve=Object(d.useCallback)(Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e({variables:{link:R.trim()?R.includes("http")?R:"http://".concat(R):null,category:a,files:0!==z.length?z:null,images:null!==G&&void 0!==G&&G.trim()?[{url:G,fileName:Q}]:null}});case 2:fe(!1);case 3:case"end":return e.stop()}}),e)}))),[$e,a,z,Q,G,R]),ke=Object(d.useCallback)((function(e){var n=e.name;V(e.name),fe(!0),ge(!0),Object(w.a)("images",e,a,n,H,le,se),ge(!1),se(0)}),[a,le]),Se=Object(d.useCallback)((function(e){se(le+1),fe(!0),N.a.ref("/files/".concat(a,"/").concat(e.name)).put(e).on("state_changed",(function(e){}),(function(e){return console.log(e)}),(function(){N.a.ref("/files/".concat(a,"/").concat(e.name)).getDownloadURL().then((function(n){K((function(t){return[].concat(Object(i.a)(t),[{url:n,fileName:e.name}])})),$.b.success("\ud30c\uc77c / \uc774\ubbf8\uc9c0\uac00 \uc5c5\ub85c\ub4dc \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),se(0)}))}))}),[a,le]),ye=Object(d.useCallback)((function(){Q&&Q.trim()&&(Object(C.a)("images",a,Q,H),se(0))}),[a,Q]),Ie=Object(d.useCallback)((function(e){N.a.ref("/files/".concat(a,"/").concat(e.name)).delete().then((function(){$.b.success("\uc5c5\ub85c\ub4dc \ub41c \ud30c\uc77c/\uc774\ubbf8\uc9c0\uac00 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),K(z.filter((function(n){return n.fileName!==e.name})))})).catch((function(e){return $.b.error(e)}))}),[a,z]);return Object(F.jsx)(A,{children:Object(F.jsxs)(h.a,Object(c.a)(Object(c.a)({},L),{},{name:"upload-board",onFinish:ve,children:[ne&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{className:"link-checkbox",children:Object(F.jsx)(v.a,{onChange:he,children:M?"\ub9c1\ud06c\uc81c\uac70":"\ub9c1\ud06c\ucd94\uac00"})}),M&&Object(F.jsx)(h.a.Item,{name:["link"],label:"\ub9c1\ud06c",children:Object(F.jsx)(k.a,{type:"text",onChange:U,value:R})})]}),ce&&Object(F.jsx)(h.a.Item,{name:["file"],label:"\ud30c\uc77c",children:Object(F.jsx)(S.a,{style:{marginBottom:20},multiple:!0,customRequest:function(e){var n=e.file;return Se(n)},maxCount:4,onChange:function(e){var n=e.file;0!==z.length?n.status="done":n.status="removed"},onRemove:function(e){return Ie(e)},children:Object(F.jsx)(y.a,{icon:Object(F.jsx)(I.a,{}),children:"Upload"})})}),Object(F.jsx)(h.a.Item,{name:["image"],label:"\uc774\ubbf8\uc9c0",children:Object(F.jsx)(S.a,{style:{marginBottom:20},listType:"picture",customRequest:function(e){var n=e.file;return ke(n)},progress:{showInfo:!0},onChange:function(e){var n=e.file;0!==z.length?n.status="done":n.status="removed"},maxCount:1,onRemove:function(){return ye()},children:Object(F.jsx)(y.a,{icon:Object(F.jsx)(I.a,{}),children:"Upload"})})}),Object(F.jsx)(h.a.Item,{wrapperCol:Object(c.a)(Object(c.a)({},L.wrapperCol),{},{offset:8}),children:Object(F.jsx)(y.a,{type:"primary",htmlType:"submit",disabled:Oe,children:Oe?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(x.a,{})," \u2002 Uploading..."]}):"\uc5c5\ub85c\ub4dc"})})]}))})};var A=B.a.div(a||(a=Object(r.a)(["\n  .link-checkbox {\n    margin: 20px 0;\n  }\n"])))}}]);
//# sourceMappingURL=26.9ac9ca25.chunk.js.map