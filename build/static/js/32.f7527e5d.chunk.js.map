{"version":3,"sources":["queries/adminQuery.ts","queries/sharedQuery.ts","utils/convertDate.ts","pages/Admin/BoardDetail/styles.tsx","pages/Admin/BoardDetail/index.tsx"],"names":["CREATE_BOARD","gql","GET_BOARD_BY_CATEGORY","DELETE_BOARD","EDIT_BOARD","DELETE_FILE","DELETE_IMAGE","CREATE_FILE","CREATE_IMAGE","DELETE_LINK","EDIT_POPUP","GET_BOARD_BY_ID","GET_LINK","GET_BOARD","USER_LOGIN","GET_BOARD_BY_MONTH","GET_POPUP_STATUS","getDate","time","itemDate","Date","Math","floor","parseInt","getFullYear","getMonth","Container","styled","div","props","url","Button","Btn","BoardDetail","search","useLocation","param","useParams","history","useHistory","queryObj","queryString","parse","id","category","useState","board","setBoard","files","setFiles","images","setImages","useQuery","variables","data","loading","useMutation","onCompleted","deleteBoard","ok","err","toast","success","push","pathname","state","refresh","console","log","error","handleDeleteBoard","useCallback","useEffect","getBoardById","type","onClick","goBack","bordered","layout","style","display","flexDirection","Item","label","span","labelStyle","width","Title","level","title","Text","private","createdAt","length","map","elem","idx","href","download","target","rel","fileName","src","alt","whiteSpace","dangerouslySetInnerHTML","__html","content","className","to","danger"],"mappings":"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","file":"static/js/32.f7527e5d.chunk.js","sourcesContent":["import { gql } from \"@apollo/client\";\n\nexport const CREATE_BOARD = gql`\n  mutation createBoard(\n    $title: String\n    $content: String\n    $category: String!\n    $files: [AttachModel]\n    $images: [AttachModel]\n    $link: String\n    $type: String\n    $private: Boolean\n  ) {\n    createBoard(\n      title: $title\n      content: $content\n      category: $category\n      files: $files\n      images: $images\n      link: $link\n      type: $type\n      private: $private\n    ) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const GET_BOARD_BY_CATEGORY = gql`\n  query getBoardByCategory($category: String!) {\n    getBoardByCategory(category: $category) {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        private\n        type\n        files {\n          id\n          url\n          fileName\n        }\n        images {\n          id\n          url\n          fileName\n        }\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n`;\n\nexport const DELETE_BOARD = gql`\n  mutation deleteBoard($id: Int!) {\n    deleteBoard(id: $id) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const EDIT_BOARD = gql`\n  mutation editBoard(\n    $id: Int!\n    $title: String\n    $content: String\n    $link: String\n    $private: Boolean\n    $type: String\n  ) {\n    editBoard(\n      id: $id\n      title: $title\n      content: $content\n      link: $link\n      private: $private\n      type: $type\n    ) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const EDIT_FILE = gql`\n  mutation editFile($id: Int!, $url: String!, $fileName: String!) {\n    editFile(id: $id, url: $url, fileName: $fileName) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const EDIT_IMAGE = gql`\n  mutation editImage($id: Int!, $url: String!, $fileName: String!) {\n    editImage(id: $id, url: $url, fileName: $fileName) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const DELETE_FILE = gql`\n  mutation deleteFile($id: Int!) {\n    deleteFile(id: $id) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const DELETE_IMAGE = gql`\n  mutation deleteImage($id: Int!) {\n    deleteImage(id: $id) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const CREATE_FILE = gql`\n  mutation createFile($url: String!, $fileName: String!, $boardId: Int!) {\n    createFile(url: $url, fileName: $fileName, boardId: $boardId) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const CREATE_IMAGE = gql`\n  mutation createImage($url: String!, $fileName: String!, $boardId: Int!) {\n    createImage(url: $url, fileName: $fileName, boardId: $boardId) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const CREATE_LINK = gql`\n  mutation createLink($title: String!, $url: String!) {\n    createLink(title: $title, url: $url) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const DELETE_LINK = gql`\n  mutation deleteLink($id: Int!) {\n    deleteLink(id: $id) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const EDIT_LINK = gql`\n  mutation editLink($id: Int!, $title: String, $url: String) {\n    editLink(id: $id, title: $title, url: $url) {\n      ok\n      err\n    }\n  }\n`;\n\nexport const EDIT_POPUP = gql`\n  mutation editPopup($up: String!, $url: String) {\n    editPopup(up: $up, url: $url) {\n      ok\n      err\n    }\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const GET_BOARD_BY_ID = gql`\n  query getBoardById($id: Int!) {\n    getBoardById(id: $id) {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        private\n        type\n        files {\n          id\n          url\n          fileName\n        }\n        images {\n          id\n          url\n          fileName\n        }\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n`;\n\nexport const GET_LINK = gql`\n  query getLinks {\n    getLinks {\n      ok\n      err\n      data {\n        id\n        url\n        title\n        createdAt\n      }\n    }\n  }\n`;\n\nexport const GET_BOARD = gql`\n  query getBoard {\n    getBoard {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n`;\n\nexport const USER_LOGIN = gql`\n  mutation UserLogin($id: String!, $pwd: String!) {\n    UserLogin(id: $id, pwd: $pwd) {\n      success\n      error\n      data {\n        id\n        stno\n      }\n    }\n  }\n`;\n\nexport const GET_BOARD_BY_MONTH = gql`\n  query getBoardByMonth($category: String!) {\n    getBoardByMonth(category: $category) {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n`;\n\nexport const GET_POPUP_STATUS = gql`\n  query getPopupStatus {\n    getPopupStatus {\n      ok\n      err\n      data {\n        url\n        up\n      }\n    }\n  }\n`;\n","export const getDate = (time: string) => {\n  const itemDate = new Date(Math.floor(parseInt(time, 10) / 1000) * 1000);\n  const date =\n    itemDate.getFullYear() +\n    \"-\" +\n    (itemDate.getMonth() + 1 >= 10\n      ? itemDate.getMonth() + 1\n      : `0${itemDate.getMonth() + 1}`) +\n    \"-\" +\n    (itemDate.getDate() >= 10 ? itemDate.getDate() : `0${itemDate.getDate()}`);\n  return date;\n};\n\nexport const convertMonth = (name: string): string => {\n  switch (name) {\n    case \"Jan\":\n      return \"1\";\n    case \"Feb\":\n      return \"2\";\n    case \"Mar\":\n      return \"3\";\n    case \"Apr\":\n      return \"4\";\n    case \"May\":\n      return \"5\";\n    case \"Jun\":\n      return \"6\";\n    case \"Jul\":\n      return \"7\";\n    case \"Aug\":\n      return \"8\";\n    case \"Sep\":\n      return \"9\";\n    case \"Oct\":\n      return \"10\";\n    case \"Nov\":\n      return \"11\";\n    case \"Dec\":\n      return \"12\";\n    default:\n      return name;\n  }\n};\n\nexport const convertDay = (name: string): string => {\n  switch (name) {\n    case \"Sun\":\n      return \"일\";\n    case \"Mon\":\n      return \"월\";\n    case \"Tue\":\n      return \"화\";\n    case \"Wed\":\n      return \"수\";\n    case \"Thu\":\n      return \"목\";\n    case \"Fri\":\n      return \"금\";\n    case \"Sat\":\n      return \"토\";\n    case \"0\":\n      return \"일\";\n    case \"1\":\n      return \"월\";\n    case \"2\":\n      return \"화\";\n    case \"3\":\n      return \"수\";\n    case \"4\":\n      return \"목\";\n    case \"5\":\n      return \"금\";\n    case \"6\":\n      return \"토\";\n    default:\n      return name;\n  }\n};\n","import styled from \"@emotion/styled\";\nimport { Button as Btn } from \"antd\";\n\ninterface UrlProps {\n  url: string;\n}\n\nexport const CarouselDiv = styled.div<UrlProps>`\n  background-image: url(${(props) => props.url});\n  width: 100%;\n  height: 300px;\n  background-size: contain;\n`;\n\nexport const Container = styled.div`\n  & .button-group {\n    display: flex;\n    align-items: center;\n  }\n`;\n\nexport const Button = styled(Btn)`\n  margin: 15px 0;\n  margin-right: 15px;\n`;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport queryString from \"query-string\";\nimport { useHistory, useLocation, useParams } from \"react-router\";\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport { GET_BOARD_BY_ID } from \"../../../queries/sharedQuery\";\nimport {\n  getBoardById,\n  getBoardByIdVariables,\n  getBoardById_getBoardById_data,\n  getBoardById_getBoardById_data_files,\n  getBoardById_getBoardById_data_images,\n} from \"../../../typings/api\";\nimport { Descriptions, Typography } from \"antd\";\nimport { Button, Container } from \"./styles\";\nimport { DELETE_BOARD } from \"../../../queries/adminQuery\";\nimport { toast } from \"react-toastify\";\nimport { Link } from \"react-router-dom\";\nimport { getDate } from \"../../../utils/convertDate\";\nimport Text from \"antd/lib/typography/Text\";\n\ninterface locationProps {\n  search: string;\n}\n\ninterface paramProps {\n  param: string;\n}\n\nconst BoardDetail: React.VFC = () => {\n  const { search } = useLocation<locationProps>();\n  const { param } = useParams<paramProps>();\n  const history = useHistory();\n  const queryObj = queryString.parse(search);\n  const { id, category } = queryObj;\n  const [board, setBoard] = useState<getBoardById_getBoardById_data>();\n  const [files, setFiles] =\n    useState<(getBoardById_getBoardById_data_files | undefined | null)[]>();\n  const [images, setImages] =\n    useState<(getBoardById_getBoardById_data_images | undefined | null)[]>();\n\n  const { data, loading } = useQuery<getBoardById, getBoardByIdVariables>(\n    GET_BOARD_BY_ID,\n    {\n      variables: {\n        id: parseInt(id as string, 10),\n      },\n    }\n  );\n\n  const [deleteBoard] = useMutation(DELETE_BOARD, {\n    onCompleted: ({ deleteBoard }) => {\n      const { ok, err } = deleteBoard;\n      if (ok) {\n        toast.success(\"게시물이 삭제 되었습니다.\");\n        history.push({\n          pathname: `/admin/${param}/${category}`,\n          state: { refresh: true },\n        });\n      } else {\n        console.log(err);\n        toast.error(\"게시물을 삭제 할 수 없습니다\");\n      }\n    },\n  });\n\n  const handleDeleteBoard = useCallback(() => {\n    deleteBoard({\n      variables: {\n        id: parseInt(id as string, 10),\n      },\n    });\n  }, [id, deleteBoard]);\n\n  useEffect(() => {\n    if (data && data.getBoardById && data.getBoardById.data) {\n      setBoard(data.getBoardById.data);\n    }\n    if (\n      data &&\n      data.getBoardById &&\n      data.getBoardById.data &&\n      data.getBoardById.data.files\n    ) {\n      setFiles(data.getBoardById.data.files);\n    }\n    if (\n      data &&\n      data.getBoardById &&\n      data.getBoardById.data &&\n      data.getBoardById.data.images\n    ) {\n      setImages(data.getBoardById.data.images);\n    }\n  }, [data]);\n\n  if (loading) {\n    return <>loading</>;\n  }\n\n  return (\n    <Container>\n      <Button type=\"ghost\" onClick={() => history.goBack()}>\n        뒤로\n      </Button>\n      <Descriptions\n        bordered\n        // column={{ xxl: 4, xl: 3, lg: 3, md: 3, sm: 2, xs: 1 }}\n        layout=\"horizontal\"\n        style={{ display: \"flex\", flexDirection: \"column\" }}\n      >\n        <Descriptions.Item\n          key=\"title\"\n          label=\"제목\"\n          span={3}\n          labelStyle={{ width: 100 }}\n        >\n          <Typography.Title level={3}>{board?.title}</Typography.Title>\n        </Descriptions.Item>\n        <Descriptions.Item\n          key=\"status\"\n          label=\"상태\"\n          span={3}\n          labelStyle={{ width: 100 }}\n        >\n          <Typography.Text type={board?.private ? \"danger\" : \"success\"}>\n            {board?.private ? \"비공개\" : \"공개\"}\n          </Typography.Text>\n        </Descriptions.Item>\n        <Descriptions.Item\n          key=\"date\"\n          label=\"작성일\"\n          span={3}\n          labelStyle={{ width: 100 }}\n        >\n          {getDate(board?.createdAt || \"\")}\n        </Descriptions.Item>\n        <Descriptions.Item\n          key=\"file\"\n          label=\"파일\"\n          span={3}\n          labelStyle={{ width: 100 }}\n        >\n          {files && files.length !== 0 ? (\n            <>\n              {files.map((elem, idx) => {\n                return (\n                  <span key={idx} style={{ display: \"inline-block\" }}>\n                    <a\n                      href={elem?.url}\n                      download\n                      target={\"_blank\"}\n                      rel=\"noreferrer\"\n                    >\n                      {elem?.fileName}\n                    </a>\n                  </span>\n                );\n              })}\n            </>\n          ) : (\n            <>첨부파일 없음</>\n          )}\n        </Descriptions.Item>\n        {param === \"achievement\" && (\n          <Descriptions.Item\n            label=\"이미지\"\n            span={4}\n            labelStyle={{ width: 100 }}\n            key=\"image\"\n          >\n            {images && images.length !== 0 ? (\n              <img\n                src={images[images.length - 1]!.url}\n                alt=\"newsimage\"\n                width={300}\n              />\n            ) : (\n              <>이미지 없음</>\n            )}\n          </Descriptions.Item>\n        )}\n        <Descriptions.Item label=\"내용\" span={4} key=\"content\">\n          <span\n            style={{ whiteSpace: \"pre-wrap\" }}\n            dangerouslySetInnerHTML={{ __html: board?.content || \"\" }}\n          ></span>\n        </Descriptions.Item>\n      </Descriptions>\n      <div className=\"button-group\">\n        <Link\n          to={`/admin/${param}/edit-${param}?category=${category}&id=${id}`}\n        >\n          <Button type=\"primary\">수정</Button>\n        </Link>\n        <Button type=\"primary\" danger onClick={handleDeleteBoard}>\n          삭제\n        </Button>\n      </div>\n    </Container>\n  );\n};\n\nexport default BoardDetail;\n"],"sourceRoot":""}