(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[21],{102:function(n,e,t){"use strict";t.d(e,"a",(function(){return h})),t.d(e,"j",(function(){return $})),t.d(e,"d",(function(){return v})),t.d(e,"h",(function(){return y})),t.d(e,"e",(function(){return k})),t.d(e,"f",(function(){return x})),t.d(e,"b",(function(){return I})),t.d(e,"c",(function(){return B})),t.d(e,"g",(function(){return S})),t.d(e,"i",(function(){return w}));var a,r,i,c,o,d,u,l,s,b,f,j,g,p,O=t(93),m=t(473),h=Object(m.a)(a||(a=Object(O.a)(["\n  mutation createBoard(\n    $title: String\n    $content: String\n    $category: String!\n    $files: [AttachModel]\n    $images: [AttachModel]\n    $link: String\n    $type: String\n    $private: Boolean\n  ) {\n    createBoard(\n      title: $title\n      content: $content\n      category: $category\n      files: $files\n      images: $images\n      link: $link\n      type: $type\n      private: $private\n    ) {\n      ok\n      err\n    }\n  }\n"]))),$=Object(m.a)(r||(r=Object(O.a)(["\n  query getBoardByCategory($category: String!) {\n    getBoardByCategory(category: $category) {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        private\n        type\n        files {\n          id\n          url\n          fileName\n        }\n        images {\n          id\n          url\n          fileName\n        }\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n"]))),v=Object(m.a)(i||(i=Object(O.a)(["\n  mutation deleteBoard($id: Int!) {\n    deleteBoard(id: $id) {\n      ok\n      err\n    }\n  }\n"]))),y=Object(m.a)(c||(c=Object(O.a)(["\n  mutation editBoard(\n    $id: Int!\n    $title: String\n    $content: String\n    $link: String\n    $private: Boolean\n    $type: String\n  ) {\n    editBoard(\n      id: $id\n      title: $title\n      content: $content\n      link: $link\n      private: $private\n      type: $type\n    ) {\n      ok\n      err\n    }\n  }\n"]))),k=(Object(m.a)(o||(o=Object(O.a)(["\n  mutation editFile($id: Int!, $url: String!, $fileName: String!) {\n    editFile(id: $id, url: $url, fileName: $fileName) {\n      ok\n      err\n    }\n  }\n"]))),Object(m.a)(d||(d=Object(O.a)(["\n  mutation editImage($id: Int!, $url: String!, $fileName: String!) {\n    editImage(id: $id, url: $url, fileName: $fileName) {\n      ok\n      err\n    }\n  }\n"]))),Object(m.a)(u||(u=Object(O.a)(["\n  mutation deleteFile($id: Int!) {\n    deleteFile(id: $id) {\n      ok\n      err\n    }\n  }\n"])))),x=Object(m.a)(l||(l=Object(O.a)(["\n  mutation deleteImage($id: Int!) {\n    deleteImage(id: $id) {\n      ok\n      err\n    }\n  }\n"]))),I=Object(m.a)(s||(s=Object(O.a)(["\n  mutation createFile($url: String!, $fileName: String!, $boardId: Int!) {\n    createFile(url: $url, fileName: $fileName, boardId: $boardId) {\n      ok\n      err\n    }\n  }\n"]))),B=Object(m.a)(b||(b=Object(O.a)(["\n  mutation createImage($url: String!, $fileName: String!, $boardId: Int!) {\n    createImage(url: $url, fileName: $fileName, boardId: $boardId) {\n      ok\n      err\n    }\n  }\n"]))),S=(Object(m.a)(f||(f=Object(O.a)(["\n  mutation createLink($title: String!, $url: String!) {\n    createLink(title: $title, url: $url) {\n      ok\n      err\n    }\n  }\n"]))),Object(m.a)(j||(j=Object(O.a)(["\n  mutation deleteLink($id: Int!) {\n    deleteLink(id: $id) {\n      ok\n      err\n    }\n  }\n"])))),w=(Object(m.a)(g||(g=Object(O.a)(["\n  mutation editLink($id: Int!, $title: String, $url: String) {\n    editLink(id: $id, title: $title, url: $url) {\n      ok\n      err\n    }\n  }\n"]))),Object(m.a)(p||(p=Object(O.a)(["\n  mutation editPopup($up: String!, $url: String) {\n    editPopup(up: $up, url: $url) {\n      ok\n      err\n    }\n  }\n"]))))},111:function(n,e,t){"use strict";t.d(e,"a",(function(){return r}));var a=t(128);t(179);a.a.initializeApp({apiKey:"AIzaSyDM5Cqu1m1YJ7E44OfM9Yo3LH0ZUN8Y6x4",authDomain:"sunmoon-swe.firebaseapp.com",projectId:"sunmoon-swe",storageBucket:"sunmoon-swe.appspot.com",messagingSenderId:"1064857281018",appId:"1:1064857281018:web:b2881ce151e1a16b068443",measurementId:"G-JYK8JT1WEN"});var r=a.a.storage()},117:function(n,e,t){"use strict";t.d(e,"b",(function(){return s})),t.d(e,"d",(function(){return b})),t.d(e,"a",(function(){return f})),t.d(e,"f",(function(){return j})),t.d(e,"c",(function(){return g})),t.d(e,"e",(function(){return p}));var a,r,i,c,o,d,u=t(93),l=t(473),s=Object(l.a)(a||(a=Object(u.a)(["\n  query getBoardById($id: Int!) {\n    getBoardById(id: $id) {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        private\n        type\n        files {\n          id\n          url\n          fileName\n        }\n        images {\n          id\n          url\n          fileName\n        }\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n"]))),b=Object(l.a)(r||(r=Object(u.a)(["\n  query getLinks {\n    getLinks {\n      ok\n      err\n      data {\n        id\n        url\n        title\n        createdAt\n      }\n    }\n  }\n"]))),f=Object(l.a)(i||(i=Object(u.a)(["\n  query getBoard {\n    getBoard {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n"]))),j=Object(l.a)(c||(c=Object(u.a)(["\n  mutation UserLogin($id: String!, $pwd: String!) {\n    UserLogin(id: $id, pwd: $pwd) {\n      success\n      error\n      data {\n        id\n        stno\n      }\n    }\n  }\n"]))),g=Object(l.a)(o||(o=Object(u.a)(["\n  query getBoardByMonth($category: String!) {\n    getBoardByMonth(category: $category) {\n      ok\n      err\n      data {\n        id\n        title\n        content\n        category\n        link\n        createdAt\n        updatedAt\n        deleteAt\n      }\n    }\n  }\n"]))),p=Object(l.a)(d||(d=Object(u.a)(["\n  query getPopupStatus {\n    getPopupStatus {\n      ok\n      err\n      data {\n        url\n        up\n      }\n    }\n  }\n"])))},132:function(n,e,t){"use strict";t.d(e,"d",(function(){return a})),t.d(e,"c",(function(){return r})),t.d(e,"e",(function(){return i})),t.d(e,"b",(function(){return c})),t.d(e,"a",(function(){return o}));var a=function(n){return"storage"===(null===n||void 0===n?void 0:n.toString().split("-")[0])},r=function(n){switch(null===n||void 0===n?void 0:n.toString().split("-")[0]){case"storage":case"achievement":return!0;default:return!1}},i=function(n){switch(null===n||void 0===n?void 0:n.toString().split("-")[1]){case"aidnews":case"valuenews":case"coopnews":return!0;default:return!1}},c=function(n){switch(null===n||void 0===n?void 0:n.toString().split("-")[0]){case"storage":case"achievement":return!0;default:return!1}},o=function(n){return"introduce"!==(null===n||void 0===n?void 0:n.toString().split("-")[0])}},157:function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));var a=t(44),r=t(111),i=function(n,e,t,i){r.a.ref("/".concat(n,"/").concat(e,"/").concat(t)).delete().then((function(){i("")})).catch((function(n){return a.b.error(n)}))}},158:function(n,e,t){"use strict";t.d(e,"a",(function(){return d}));var a=t(113),r=t(110),i=t.n(r),c=t(44),o=t(111),d=function(n,e,t,r,d,u,l,s,b){o.a.ref("/".concat(n,"/").concat(t,"/").concat(r)).put(e).on("state_changed",(function(n){}),(function(n){return console.log(n)}),(function(){l(1),o.a.ref("/".concat(n,"/").concat(t,"/").concat(r)).getDownloadURL().then(function(){var n=Object(a.a)(i.a.mark((function n(e){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(d(e),!s||!b){n.next=4;break}return n.next=4,s({variables:{url:e,fileName:r,boardId:b}});case 4:c.b.success("\ud30c\uc77c / \uc774\ubbf8\uc9c0\uac00 \uc5c5\ub85c\ub4dc \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),l(0);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}))}},235:function(n,e,t){"use strict";t.d(e,"b",(function(){return d})),t.d(e,"a",(function(){return u}));var a,r,i=t(93),c=t(101),o=t(201),d=c.a.div(a||(a=Object(i.a)(["\n  & .button-group {\n    display: flex;\n    align-items: center;\n  }\n\n  & .attach-group {\n    display: flex;\n    margin: 5px 0;\n  }\n\n  & .attach-button {\n    margin-left: 15px;\n    background-color: transparent;\n    border: none;\n    cursor: pointer;\n    &:hover {\n      color: #e74c3c;\n      transition: linear 0.2s;\n    }\n  }\n"]))),u=Object(c.a)(o.a)(r||(r=Object(i.a)(["\n  margin: 15px 0;\n  margin-right: 15px;\n"])))},483:function(n,e,t){"use strict";t.r(e);var a,r=t(92),i=t(113),c=t(88),o=t(110),d=t.n(o),u=t(240),l=t(453),s=t(468),b=t(472),f=t(2),j=t(138),g=t.n(j),p=t(4),O=t(93),m=t(101).a.div(a||(a=Object(O.a)(["\n  & .attach-group {\n    display: flex;\n    margin: 5px 0;\n  }\n\n  & .attach-button {\n    margin-left: 15px;\n    background-color: transparent;\n    border: none;\n    cursor: pointer;\n    &:hover {\n      color: #e74c3c;\n      transition: linear 0.2s;\n    }\n  }\n  & .button-group {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  img {\n    object-fit: contain;\n    width: 300px;\n    height: 400px;\n  }\n"]))),h=t(136),$=t(173),v=t(117),y=t(135),k=t(235),x=t(133),I=t(459),B=t(485),S=t(111),w=t(102),N=t(44),C=t(158),A=t(157),L=t(132),F=t(11);e.default=function(){var n=Object(p.g)(),e=Object(p.i)(),t=e.param,a=e.subparam,o=Object(p.h)().search,j=g.a.parse(o),O=j.category,q=j.id,M=Object(f.useState)(),J=Object(c.a)(M,2),U=J[0],D=J[1],E=Object(f.useState)(),P=Object(c.a)(E,2),R=P[0],Y=P[1],z=Object(f.useState)([]),T=Object(c.a)(z,2),_=T[0],K=T[1],G=Object(f.useState)(),H=Object(c.a)(G,2),W=H[0],Z=H[1],Q=Object(f.useState)(),V=Object(c.a)(Q,2),X=V[0],nn=V[1],en=Object(f.useState)(),tn=Object(c.a)(en,2),an=tn[0],rn=tn[1],cn=Object(y.a)(""),on=Object(c.a)(cn,3),dn=on[0],un=on[1],ln=on[2],sn=Object(f.useState)(0),bn=Object(c.a)(sn,2),fn=bn[0],jn=bn[1],gn=Object(f.useState)(!1),pn=Object(c.a)(gn,2),On=pn[0],mn=pn[1],hn=Object(f.useState)(!1),$n=Object(c.a)(hn,2),vn=$n[0],yn=$n[1];Object(f.useEffect)((function(){mn(Object(L.b)(a)),yn(Object(L.d)(a))}),[a]);var kn=Object(h.a)(v.b,{variables:{id:parseInt(q,10)}}),xn=kn.loading,In=kn.data,Bn=kn.refetch,Sn=Object($.a)(w.c,{onCompleted:function(n){n.createImage.ok&&(jn(0),Bn&&Bn())}}),wn=Object(c.a)(Sn,1)[0],Nn=Object($.a)(w.f,{onCompleted:function(n){var e=n.deleteImage,t=e.ok,a=e.err;t?(Bn&&Bn(),N.b.error("\uc774\ubbf8\uc9c0\uac00 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4")):(console.log(a),N.b.error(a))}}),Cn=Object(c.a)(Nn,1)[0],An=Object($.a)(w.b,{onCompleted:function(n){n.createFile.ok&&(jn(0),Bn&&Bn())}}),Ln=Object(c.a)(An,1)[0],Fn=Object($.a)(w.e,{onCompleted:function(n){var e=n.deleteFile,t=e.ok,a=e.err;t?(N.b.success("\ud30c\uc77c\uc774 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),Bn&&Bn()):(console.log(a),N.b.error(a))}}),qn=Object(c.a)(Fn,1)[0],Mn=Object($.a)(w.h,{onCompleted:function(e){var a=e.editBoard,r=a.ok,i=a.err;r?(N.b.success("\uac8c\uc2dc\ubb3c\uc774 \uc218\uc815 \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),n.push({pathname:"/admin/".concat(t,"/").concat(O),state:{refresh:!0}})):(console.log(i),N.b.error("\uac8c\uc2dc\ubb3c\uc744 \uc0ad\uc81c \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"))}}),Jn=Object(c.a)(Mn,1)[0],Un=Object(f.useCallback)((function(){X&&X.trim()&&Object(A.a)("images",O,X,Z)}),[O,X]),Dn=Object(f.useCallback)(function(){var n=Object(i.a)(d.a.mark((function n(e){var t;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:Un(),jn(fn+1),t=e.name,nn(e.name),Object(C.a)("images",e,O,t,Z,fn,jn,wn,parseInt(q,10));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[O,fn,Un,wn,q]),En=Object(f.useCallback)((function(n){jn(1),S.a.ref("/files/".concat(O,"/").concat(n.name)).put(n).on("state_changed",(function(n){}),(function(n){return console.log(n)}),(function(){S.a.ref("/files/".concat(O,"/").concat(n.name)).getDownloadURL().then(function(){var e=Object(i.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K((function(e){return[].concat(Object(r.a)(e),[{url:t,fileName:n.name}])})),e.next=3,Ln({variables:{url:t,fileName:n.name,boardId:parseInt(q,10)},onCompleted:function(n){var e=n.createFile,t=e.ok,a=e.err;t?(N.b.success("\ud30c\uc77c\uc774 \uc5c5\ub85c\ub4dc \ub418\uc5c8\uc2b5\ub2c8\ub2e4"),Bn&&Bn()):(N.b.error("\ud30c\uc77c \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4"),console.log(a))}});case 3:jn(fn-1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}))}),[Ln,q,O,fn,Bn]),Pn=Object(f.useCallback)(function(){var n=Object(i.a)(d.a.mark((function n(e,t){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return S.a.ref("/files/".concat(O,"/").concat(t)).delete(),n.next=3,qn({variables:{id:e}});case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[qn,O]);return Object(f.useEffect)((function(){var n;(In&&In.getBoardById&&In.getBoardById.data&&(D(In.getBoardById.data),ln(In.getBoardById.data.link||"")),In&&In.getBoardById&&In.getBoardById.data&&In.getBoardById.data.files&&Y(In.getBoardById.data.files),In&&In.getBoardById&&In.getBoardById.data&&In.getBoardById.data.images)&&(rn(In.getBoardById.data.images[0]),nn(null===(n=In.getBoardById.data.images[0])||void 0===n?void 0:n.fileName))}),[In,D,ln]),xn?Object(F.jsx)("div",{children:"loading..."}):Object(F.jsxs)(m,{children:[Object(F.jsxs)("div",{className:"button-group",children:[Object(F.jsx)(k.a,{type:"ghost",onClick:function(){return n.goBack()},children:"\ub4a4\ub85c"}),Object(F.jsx)(k.a,{type:"primary",disabled:0!==fn,onClick:function(){return Jn({variables:{id:parseInt(q,10),link:dn.includes("http")?dn:"http://".concat(dn)}})},children:0===fn?"\uc644\ub8cc":Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(x.a,{})," \ud30c\uc77c / \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub529 \uc911"]})})]}),Object(F.jsxs)(u.b,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},layout:"horizontal",children:[vn&&Object(F.jsx)(u.b.Item,{label:"\ub9c1\ud06c",span:4,labelStyle:{width:100},children:Object(F.jsx)(l.a,{placeholder:(null===U||void 0===U?void 0:U.link)||void 0,value:dn,onChange:un})}),On&&Object(F.jsxs)(u.b.Item,{label:"\ud30c\uc77c",span:4,labelStyle:{width:100},children:[R&&0!==R.length?Object(F.jsx)(F.Fragment,{children:R.map((function(n,e){return Object(F.jsxs)("div",{className:"attach-group",children:[Object(F.jsx)("a",{href:null===n||void 0===n?void 0:n.url,download:!0,target:"_blank",rel:"noreferrer",children:null===n||void 0===n?void 0:n.fileName}),Object(F.jsx)("button",{className:"attach-button",onClick:function(){return Pn(null===n||void 0===n?void 0:n.id,null===n||void 0===n?void 0:n.fileName)},children:Object(F.jsx)(I.a,{})})]},e)}))}):0===_.length?Object(F.jsx)("div",{children:"\ucca8\ubd80\ud30c\uc77c \uc5c6\uc74c"}):Object(F.jsx)(F.Fragment,{}),Object(F.jsx)(s.a,{multiple:!0,maxCount:4,className:"upload-list-inline",customRequest:function(n){var e=n.file;return En(e)},onChange:function(n){var e=n.file;0!==_.length?e.status="done":e.status="removed"},children:Object(F.jsx)(k.a,{icon:Object(F.jsx)(B.a,{}),children:"\ud30c\uc77c \uc5c5\ub85c\ub4dc"})})]}),Object(F.jsxs)(u.b.Item,{label:"\uc774\ubbf8\uc9c0",span:4,labelStyle:{width:100},children:[an&&Object(F.jsx)(k.a,{danger:!0,icon:Object(F.jsx)(I.a,{}),onClick:function(){Object(A.a)("images",O,an.fileName,Z),Cn({variables:{id:an.id}})},children:"\uc774\ubbf8\uc9c0 \uc0ad\uc81c"}),Object(F.jsx)(s.a,{listType:"picture",customRequest:function(n){var e=n.file;an&&Cn({variables:{id:an&&an.id}}),Dn(e)},progress:{showInfo:!0},onChange:function(n){var e=n.file;e.status=W?"done":"removed"},maxCount:1,children:Object(F.jsx)(k.a,{icon:Object(F.jsx)(B.a,{}),children:"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc"})}),an?Object(F.jsx)("img",{src:an.url,alt:an.fileName}):Object(F.jsx)(b.a.Text,{children:"\uc5c5\ub85c\ub4dc \ub41c \uc774\ubbf8\uc9c0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"})]})]})]})}}}]);
//# sourceMappingURL=21.f7df5841.chunk.js.map